# 短縮文字列コマンド リファレンス

このコマンドは、内部的に[JSONコマンド](JSONCMD_SAMPLES.md)に変換されてから、APIサーバーに送信されます。より手軽にサーボを制御したい場合に便利です。

## 基本書式

コマンドは、コロン（`:`）で区切られた「コマンド種別」と「パラメータ」で構成されます。

`コマンド種別:パラメータ`

**例** `mv:30,20,-20,-30`

複数のコマンドを一度に送信する場合は、スペースで区切ります。

**例:** `mv:0,0,0,0 sl:1.0 mv:90,-90,90,-90`

---

## コマンド一覧

### サーボモーターの移動

#### `mv` (move)

複数のサーボモーターを、指定した角度へ同期しながら滑らかに移動させます。`move_angle_sync`というJSONコマンドに変換されます。

- **書式**: `mv:角度1,角度2,...`
- **パラメータ**:
  - 各サーボの目標角度をカンマ区切りで指定します。
  - パラメータの数は、制御対象のサーボの数と一致させる必要があります。
  - 各パラメータには、数値、文字列エイリアス、または `.` を使用できます。

- **パラメータとして使える値:**

| 値         | 説明                               |
| :--------- | :--------------------------------- |
| (数値)     | 角度 (-90.0 〜 90.0) を直接指定します。 |
| `c`        | 中央 (`center`)                    |
| `n`        | 最小 (`min`)                       |
| `x`        | 最大 (`max`)                       |
| `.`        | 現在の角度を維持（動かさない）     |

- **具体例:**
  - 4つのサーボをすべて0度（中央）に移動
    ```
    mv:0,0,0,0
    ```
  - 1番目を90度、2番目を-90度、3番目を中央、4番目を現在の角度のままに設定
    ```
    mv:90,-90,c,.
    ```
  - 最小、最大、中央、45度に設定
    ```
    mv:n,x,c,45
    ```

### 動作設定

#### `ms` (move_sec)

`mv`コマンドのデフォルトの移動時間を設定します。

- **書式**: `ms:秒数`
- **例**: デフォルトの移動時間を1.5秒に設定
  ```
  ms:1.5
  ```

#### `st` (step_n)

`mv`コマンドのデフォルトのステップ数を設定します。数値が大きいほど動きが滑らかになります。

- **書式**: `st:ステップ数`
- **例**: デフォルトのステップ数を50に設定
  ```
  st:50
  ```

#### `is` (interval)

各コマンドの実行後に自動的に挿入される待機時間（インターバル）を設定します。

- **書式**: `is:秒数`
- **例**: インターバルを0.2秒に設定
  ```
  is:0.2
  ```

### 実行制御

#### `sl` (sleep)

指定された時間、コマンドの実行を一時停止します。

- **書式**: `sl:秒数`
- **例**: 2.5秒間待機
  ```
  sl:2.5
  ```

#### `ca` または `zz` (cancel)

コマンドキューに溜まっている未実行のコマンドをすべてキャンセル（破棄）します。パラメータは不要です。

- **書式**: `ca` または `zz`
- **例**:
  ```
  ca
  ```

---

## コマンドシーケンスの例

複数のコマンドを組み合わせることで、複雑な動作を簡単に記述できます。

- **例1: 2つのサーボを往復させる**
  ```
  mv:90,-90 sl:1 mv:-90,90 sl:1 mv:0,0
  ```
  1.  サーボ1を90度、サーボ2を-90度に移動
  2.  1秒待機
  3.  サーボ1を-90度、サーボ2を90度に移動
  4.  1秒待機
  5.  両方のサーボを中央に戻す

- **例2: 動作設定を変更しながら動かす**
  ```
  ms:0.5 st:50 mv:45,45 sl:1 ms:2.0 st:100 mv:-45,-45
  ```
  1.  移動時間を0.5秒、ステップ数を50に設定
  2.  両方のサーボを45度に移動
  3.  1秒待機
  4.  移動時間を2.0秒、ステップ数を100に設定（よりゆっくり、滑らかに）
  5.  両方のサーボを-45度に移動
