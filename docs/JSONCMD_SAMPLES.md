### `ThreadWorker` で使用可能なJSONコマンドパターン

`ThreadWorker`は、JSON形式の文字列またはPythonの辞書オブジェクトをコマンドとしてキューを介して受け取ります。各コマンドの基本的な構造は `{"cmd": "コマンド名", ...}` です。

以下に、利用可能なコマンドとそのJSONサンプルを示します。

#### 1. サーボの同期移動

複数のサーボを指定した時間をかけて同期的に目標角度へ移動させます。

- **コマンド**: `move` または `move_angle_sync`
- **説明**: `move`は`move_angle_sync`の省略形です。`angles`配列で各サーボの目標角度を指定します。配列の要素に`None`を指定すると、そのサーボは現在の位置を維持します。

**基本形**
```json
{
  "cmd": "move",
  "angles": [30, -30, 0, 90]
}
```

**オプション付き（移動時間とステップ数を指定）**
```json
{
  "cmd": "move_angle_sync",
  "angles": [45, null, "center", -45],
  "move_sec": 0.5,
  "step_n": 50
}
```
* `angles`内の `null` は `None` と同じ意味です。`"center"` のような文字列も使用できます。

---

#### 2. サーボの個別移動（非同期）

各サーボを即座に指定の角度またはパルス幅へ移動させます。

- **コマンド**: `move_angle`
- **説明**: 各サーボを即座に指定の角度に移動させます。

```json
{
  "cmd": "move_angle",
  "angles": [-90, 90, null, 0]
}
```

- **コマンド**: `move_pulse`
- **説明**: 各サーボを即座に指定のパルス幅に移動させます。`0`を指定するとサーボはオフになります。

```json
{
  "cmd": "move_pulse",
  "pulses": [500, 2500, 1500, 0]
}
```

---

#### 3. 動作パラメータの設定

同期移動 (`move`/`move_angle_sync`) のデフォルト動作や、コマンド間のインターバルを設定します。

- **コマンド**: `move_sec`
- **説明**: 同期移動のデフォルトの移動時間を秒単位で設定します。

```json
{
  "cmd": "move_sec",
  "sec": 0.8
}
```

- **コマンド**: `step_n`
- **説明**: 同期移動のデフォルトのステップ数を設定します。

```json
{
  "cmd": "step_n",
  "n": 100
}
```

- **コマンド**: `interval`
- **説明**: 各移動コマンドの実行後に挿入される待機時間（インターバル）を秒単位で設定します。

```json
{
  "cmd": "interval",
  "sec": 0.5
}
```

---

#### 4. 制御コマンド

コマンドキューの制御や、処理の一時停止を行います。

- **コマンド**: `sleep`
- **説明**: 指定した時間、処理を一時停止します。

```json
{
  "cmd": "sleep",
  "sec": 2.0
}
```

- **コマンド**: `cancel`
- **説明**: コマンドキューに溜まっている未実行のコマンドをすべてクリアします。

```json
{
  "cmd": "cancel"
}
```

---

#### 5. キャリブレーション設定の保存

サーボの可動域（最小、最大、中央）のパルス幅を設定し、保存します。

- **コマンド**: `set`
- **説明**: 特定のサーボのキャリブレーション値を設定します。

**中央位置の設定**
```json
{
  "cmd": "set",
  "servo": 0,
  "target": "center",
  "pulse": 1550
}
```

**最小位置（min）の設定**
```json
{
  "cmd": "set",
  "servo": 1,
  "target": "min",
  "pulse": 600
}
```

**最大位置（max）の設定**
```json
{
  "cmd": "set",
  "servo": 2,
  "target": "max",
  "pulse": 2400
}
```
